Chapter 13
==========

Encapsulate Collections
-----------------------

我々はコレクションや自作クラスといった共通の型をパッケージ化する習慣を発展させてきた。
Java の generics でさえ、オブジェクトのキャストを不要にしたものだった。
我々は開発の途上で生じる問題を、Java 言語を構成するものではないもので解決しようとしている。
二つのバージョンの `processMessage()` で説明する。
最初のバージョンは、それを探すこと (look up) と引数を解析することの両方に、いろんなノイズが含まれるものだった。
オークションイベントの言葉で書かれていた二つ目のバージョンは、ドメインとコードの概念的なギャップがより小さいものだった。

経験則だが、型とそれにまつわる情報の伝達を generics によって制限することを試みた。
コレクションに適用すると重複のように見えるが、ドメインの概念から型として抽出されるべきヒントでもある。


Defer Decisions
-----------------------

何度も繰り返してきたテクニックに、コードを次に進めるためにメソッドやクラスの空実装というものがある。
これは、注目すべき塊や機能に集中し、それ以外に振り回されないために役立つものだ。
例えば `null Auction` は、ユニットテストにおいてメッセージの内容に触れないでリレーションシップを取り入れることを助けた。
これにより、コンパイルエラー問題の苦痛を避けて、オブジェクトの依存性について考えることができるようになる。


Keep the Code Compiling
-----------------------

我々は、インクリメンタルな変更のペースを維持し続けることで、コードがコンパイルできない時間が最小限になるようにしている。
コンパイルが失敗していると、我々が行った変更による影響がどうなるのか、コンパイラから教えてもらうことができなくなる。
これでは、ソースリポジトリにコードをチェックインできない。
コードをオープンに修正していくには、皮肉にもこのことを意識せざるをえないため、我々の動きも遅くなってしまうものだ。
テスト駆動開発で見出された素晴しい発見の一つは、開発の段階をちょうどよい大きさにできることだ。